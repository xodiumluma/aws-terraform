---
subcategory: "Chime SDK Media Pipelines"
layout: "aws"
page_title: "AWS: aws_chimesdkmediapipelines_media_insights_pipeline_configuration"
description: |-
  Terraform resource for managing an AWS Chime SDK Media Pipelines Media Insights Pipeline Configuration.
---


<!-- Please do not edit this file, it is generated. -->
# Resource: aws_chimesdkmediapipelines_media_insights_pipeline_configuration

Terraform resource for managing an AWS Chime SDK Media Pipelines Media Insights Pipeline Configuration.
Consult the [Call analytics developer guide](https://docs.aws.amazon.com/chime-sdk/latest/dg/call-analytics.html) for more detailed information about usage.

## Example Usage

### Basic Usage

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { Token, TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { ChimesdkmediapipelinesMediaInsightsPipelineConfiguration } from "./.gen/providers/aws/chimesdkmediapipelines-media-insights-pipeline-configuration";
import { DataAwsIamPolicyDocument } from "./.gen/providers/aws/data-aws-iam-policy-document";
import { IamRole } from "./.gen/providers/aws/iam-role";
import { KinesisStream } from "./.gen/providers/aws/kinesis-stream";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    const example = new KinesisStream(this, "example", {
      name: "example",
      shardCount: 2,
    });
    const mediaPipelinesAssumeRole = new DataAwsIamPolicyDocument(
      this,
      "media_pipelines_assume_role",
      {
        statement: [
          {
            actions: ["sts:AssumeRole"],
            effect: "Allow",
            principals: [
              {
                identifiers: ["mediapipelines.chime.amazonaws.com"],
                type: "Service",
              },
            ],
          },
        ],
      }
    );
    const callAnalyticsRole = new IamRole(this, "call_analytics_role", {
      assumeRolePolicy: Token.asString(mediaPipelinesAssumeRole.json),
      name: "CallAnalyticsRole",
    });
    new ChimesdkmediapipelinesMediaInsightsPipelineConfiguration(
      this,
      "my_configuration",
      {
        elements: [
          {
            amazonTranscribeCallAnalyticsProcessorConfiguration: {
              languageCode: "en-US",
            },
            type: "AmazonTranscribeCallAnalyticsProcessor",
          },
          {
            kinesisDataStreamSinkConfiguration: {
              insightsTarget: example.arn,
            },
            type: "KinesisDataStreamSink",
          },
        ],
        name: "MyBasicConfiguration",
        resourceAccessRoleArn: callAnalyticsRole.arn,
        tags: {
          Key1: "Value1",
          Key2: "Value2",
        },
      }
    );
  }
}

```

- The required policies on `callAnalyticsRole` will vary based on the selected processors. See [Call analytics resource access role](https://docs.aws.amazon.com/chime-sdk/latest/dg/ca-resource-access-role.html) for directions on choosing appropriate policies.

### Transcribe Call Analytics processor usage

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { Token, TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { ChimesdkmediapipelinesMediaInsightsPipelineConfiguration } from "./.gen/providers/aws/chimesdkmediapipelines-media-insights-pipeline-configuration";
import { DataAwsIamPolicyDocument } from "./.gen/providers/aws/data-aws-iam-policy-document";
import { IamRole } from "./.gen/providers/aws/iam-role";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    const transcribeAssumeRole = new DataAwsIamPolicyDocument(
      this,
      "transcribe_assume_role",
      {
        statement: [
          {
            actions: ["sts:AssumeRole"],
            effect: "Allow",
            principals: [
              {
                identifiers: ["transcribe.amazonaws.com"],
                type: "Service",
              },
            ],
          },
        ],
      }
    );
    const postCallRole = new IamRole(this, "post_call_role", {
      assumeRolePolicy: Token.asString(transcribeAssumeRole.json),
      name: "PostCallAccessRole",
    });
    new ChimesdkmediapipelinesMediaInsightsPipelineConfiguration(
      this,
      "my_configuration",
      {
        elements: [
          {
            amazonTranscribeCallAnalyticsProcessorConfiguration: {
              callAnalyticsStreamCategories: ["category_1", "category_2"],
              contentRedactionType: "PII",
              enablePartialResultsStabilization: true,
              filterPartialResults: true,
              languageCode: "en-US",
              languageModelName: "MyLanguageModel",
              partialResultsStability: "high",
              piiEntityTypes: "ADDRESS,BANK_ACCOUNT_NUMBER",
              postCallAnalyticsSettings: {
                contentRedactionOutput: "redacted",
                dataAccessRoleArn: postCallRole.arn,
                outputEncryptionKmsKeyId: "MyKmsKeyId",
                outputLocation: "s3://MyBucket",
              },
              vocabularyFilterMethod: "mask",
              vocabularyFilterName: "MyVocabularyFilter",
              vocabularyName: "MyVocabulary",
            },
            type: "AmazonTranscribeCallAnalyticsProcessor",
          },
          {
            kinesisDataStreamSinkConfiguration: {
              insightsTarget: example.arn,
            },
            type: "KinesisDataStreamSink",
          },
        ],
        name: "MyCallAnalyticsConfiguration",
        resourceAccessRoleArn: Token.asString(awsIamRoleExample.arn),
      }
    );
  }
}

```

### Real time alerts usage

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { ChimesdkmediapipelinesMediaInsightsPipelineConfiguration } from "./.gen/providers/aws/chimesdkmediapipelines-media-insights-pipeline-configuration";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    new ChimesdkmediapipelinesMediaInsightsPipelineConfiguration(
      this,
      "my_configuration",
      {
        elements: [
          {
            amazonTranscribeCallAnalyticsProcessorConfiguration: {
              languageCode: "en-US",
            },
            type: "AmazonTranscribeCallAnalyticsProcessor",
          },
          {
            kinesisDataStreamSinkConfiguration: {
              insightsTarget: example.arn,
            },
            type: "KinesisDataStreamSink",
          },
        ],
        name: "MyRealTimeAlertConfiguration",
        realTimeAlertConfiguration: {
          disabled: false,
          rules: [
            {
              issueDetectionConfiguration: {
                ruleName: "MyIssueDetectionRule",
              },
              type: "IssueDetection",
            },
            {
              keywordMatchConfiguration: {
                keywords: ["keyword1", "keyword2"],
                negate: false,
                ruleName: "MyKeywordMatchRule",
              },
              type: "KeywordMatch",
            },
            {
              sentimentConfiguration: {
                ruleName: "MySentimentRule",
                sentimentType: "NEGATIVE",
                timePeriod: 60,
              },
              type: "Sentiment",
            },
          ],
        },
        resourceAccessRoleArn: callAnalyticsRole.arn,
      }
    );
  }
}

```

### Transcribe processor usage

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { Token, TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { ChimesdkmediapipelinesMediaInsightsPipelineConfiguration } from "./.gen/providers/aws/chimesdkmediapipelines-media-insights-pipeline-configuration";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    new ChimesdkmediapipelinesMediaInsightsPipelineConfiguration(
      this,
      "my_configuration",
      {
        elements: [
          {
            amazonTranscribeProcessorConfiguration: {
              contentIdentificationType: "PII",
              enablePartialResultsStabilization: true,
              filterPartialResults: true,
              languageCode: "en-US",
              languageModelName: "MyLanguageModel",
              partialResultsStability: "high",
              piiEntityTypes: "ADDRESS,BANK_ACCOUNT_NUMBER",
              showSpeakerLabel: true,
              vocabularyFilterMethod: "mask",
              vocabularyFilterName: "MyVocabularyFilter",
              vocabularyName: "MyVocabulary",
            },
            type: "AmazonTranscribeProcessor",
          },
          {
            kinesisDataStreamSinkConfiguration: {
              insightsTarget: example.arn,
            },
            type: "KinesisDataStreamSink",
          },
        ],
        name: "MyTranscribeConfiguration",
        resourceAccessRoleArn: Token.asString(awsIamRoleExample.arn),
      }
    );
  }
}

```

### Voice analytics processor usage

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { ChimesdkmediapipelinesMediaInsightsPipelineConfiguration } from "./.gen/providers/aws/chimesdkmediapipelines-media-insights-pipeline-configuration";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    new ChimesdkmediapipelinesMediaInsightsPipelineConfiguration(
      this,
      "my_configuration",
      {
        elements: [
          {
            type: "VoiceAnalyticsProcessor",
            voiceAnalyticsProcessorConfiguration: {
              speakerSearchStatus: "Enabled",
              voiceToneAnalysisStatus: "Enabled",
            },
          },
          {
            lambdaFunctionSinkConfiguration: {
              insightsTarget:
                "arn:aws:lambda:us-west-2:1111111111:function:MyFunction",
            },
            type: "LambdaFunctionSink",
          },
          {
            snsTopicSinkConfiguration: {
              insightsTarget: "arn:aws:sns:us-west-2:1111111111:topic/MyTopic",
            },
            type: "SnsTopicSink",
          },
          {
            sqsQueueSinkConfiguration: {
              insightsTarget: "arn:aws:sqs:us-west-2:1111111111:queue/MyQueue",
            },
            type: "SqsQueueSink",
          },
          {
            kinesisDataStreamSinkConfiguration: {
              insightsTarget: test.arn,
            },
            type: "KinesisDataStreamSink",
          },
        ],
        name: "MyVoiceAnalyticsConfiguration",
        resourceAccessRoleArn: example.arn,
      }
    );
  }
}

```

### S3 Recording sink usage

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { ChimesdkmediapipelinesMediaInsightsPipelineConfiguration } from "./.gen/providers/aws/chimesdkmediapipelines-media-insights-pipeline-configuration";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    new ChimesdkmediapipelinesMediaInsightsPipelineConfiguration(
      this,
      "my_configuration",
      {
        elements: [
          {
            s3RecordingSinkConfiguration: {
              destination: "arn:aws:s3:::MyBucket",
            },
            type: "S3RecordingSink",
          },
        ],
        name: "MyS3RecordingConfiguration",
        resourceAccessRoleArn: example.arn,
      }
    );
  }
}

```

## Argument Reference

This resource supports the following arguments:

* `name` - (Required) Configuration name.
* `resourceAccessRoleArn` - (Required) ARN of IAM Role used by service to invoke processors and sinks specified by configuration elements.
* `elements` - (Required) Collection of processors and sinks to transform media and deliver data.
* `realTimeAlertConfiguration` - (Optional) Configuration for real-time alert rules to send EventBridge notifications when certain conditions are met.
* `tags` - (Optional) Key-value map of tags for the resource.

### Elements

* `type` - (Required) Element type.
* `amazonTranscribeCallAnalyticsProcessorConfiguration` - (Optional) Configuration for Amazon Transcribe Call Analytics processor.
    * `call_analytics_stream_categories` - (Optional) Filter for category events to be delivered to insights target.
    * `content_identification_type` - (Optional) Labels all personally identifiable information (PII) identified in Utterance events.
    * `content_redaction_type` - (Optional) Redacts all personally identifiable information (PII) identified in Utterance events.
    * `enable_partial_results_stabilization` - (Optional) Enables partial result stabilization in Utterance events.
    * `filter_partial_results` - (Optional) Filters partial Utterance events from delivery to the insights target.
    * `language_code` - (Required) Language code for the transcription model.
    * `language_model_name` - (Optional) Name of custom language model for transcription.
    * `partial_results_stability` - (Optional) Level of stability to use when partial results stabilization is enabled.
    * `pii_entity_types` - (Optional) Types of personally identifiable information (PII) to redact from an Utterance event.
    * `post_call_analytics_settings` - (Optional) Settings for post call analytics.
        * `content_redaction_output` - (Optional) Should output be redacted.
        * `data_access_role_arn` - (Required) ARN of the role used by AWS Transcribe to upload your post call analysis.
        * `output_encryption_kms_key_id` - (Optional) ID of the KMS key used to encrypt the output.
        * `output_location` - (Required) The Amazon S3 location where you want your Call Analytics post-call transcription output stored.
    * `vocabulary_filter_method` - (Optional) Method for applying a vocabulary filter to Utterance events.
    * `vocabulary_filter_name` - (Optional) Name of the custom vocabulary filter to use when processing Utterance events.
    * `vocabulary_name` - (Optional) Name of the custom vocabulary to use when processing Utterance events.
* `amazonTranscribeProcessorConfiguration` - (Optional) Configuration for Amazon Transcribe processor.
    * `content_identification_type` - (Optional) Labels all personally identifiable information (PII) identified in Transcript events.
    * `content_redaction_type` - (Optional) Redacts all personally identifiable information (PII) identified in Transcript events.
    * `enable_partial_results_stabilization` - (Optional) Enables partial result stabilization in Transcript events.
    * `filter_partial_results` - (Optional) Filters partial Utterance events from delivery to the insights target.
    * `language_code` - (Required) Language code for the transcription model.
    * `language_model_name` - (Optional) Name of custom language model for transcription.
    * `partial_results_stability` - (Optional) Level of stability to use when partial results stabilization is enabled.
    * `pii_entity_types` - (Optional) Types of personally identifiable information (PII) to redact from a Transcript event.
    * `show_speaker_label` - (Optional) Enables speaker partitioning (diarization) in your Transcript events.
    * `vocabulary_filter_method` - (Optional) Method for applying a vocabulary filter to Transcript events.
    * `vocabulary_filter_name` - (Optional) Name of the custom vocabulary filter to use when processing Transcript events.
    * `vocabulary_name` - (Optional) Name of the custom vocabulary to use when processing Transcript events.
* `kinesisDataStreamSinkConfiguration` - (Optional) Configuration for Kinesis Data Stream sink.
    * `insights_target` - (Required) Kinesis Data Stream to deliver results.
* `lambdaFunctionSinkConfiguration` - (Optional) Configuration for Lambda Function sink.
    * `insights_target` - (Required) Lambda Function to deliver results.
* `snsTopicSinkConfiguration` - (Optional) Configuration for SNS Topic sink.
    * `insights_target` - (Required) SNS topic to deliver results.
* `sqsQueueSinkConfiguration` - (Optional) Configuration for SQS Queue sink.
    * `insights_target` - (Required) SQS queue to deliver results.
* `s3RecordingSinkConfiguration` - (Optional) Configuration for S3 recording sink.
    * `destination` - (Required) S3 URI to deliver recordings.
* `voiceAnalyticsProcessorConfiguration` - (Optional) Configuration for Voice analytics processor.
    * `speaker_search_status` - (Required) Enable speaker search.
    * `voice_tone_analysis_status` - (Required) Enable voice tone analysis.

### Real time alert configuration

* `rules` - (Required) Collection of real time alert rules
    * `type` - (Required) Rule type.
    * `issue_detection_configuration` - (Optional) Configuration for an issue detection rule.
        * `rule_name` - (Required) Rule name.
    * `keyword_match_configuration` - (Optional) Configuration for a keyword match rule.
        * `rule_name` - (Required) Rule name.
        * `keywords` - (Required) Collection of keywords to match.
        * `negate` - (Optional) Negate the rule.
    * `sentiment_configuration` - (Optional) Configuration for a sentiment rule.
        * `rule_name` - (Required) Rule name.
        * `sentiment_type` - (Required) Sentiment type to match.
        * `time_period` - (Optional) Analysis interval.
* `disabled` - (Optional) Disables real time alert rules.

## Attribute Reference

This resource exports the following attributes in addition to the arguments above:

* `arn` - ARN of the Media Insights Pipeline Configuration.
* `id` - Unique ID of the Media Insights Pipeline Configuration.

## Timeouts

[Configuration options](https://developer.hashicorp.com/terraform/language/resources/syntax#operation-timeouts):

* `create` - (Default `3m`)
* `update` - (Default `3m`)
* `delete` - (Default `30s`)

## Import

In Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import Chime SDK Media Pipelines Media Insights Pipeline Configuration using the `id`. For example:

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { TerraformStack } from "cdktf";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
  }
}

```

Using `terraform import`, import Chime SDK Media Pipelines Media Insights Pipeline Configuration using the `id`. For example:

```console
% terraform import aws_chimesdkmediapipelines_media_insights_pipeline_configuration.example abcdef123456
```

<!-- cache-key: cdktf-0.19.0 input-e27c8cae132bb59224264ffd318670201dbde0c3fb71b0400db863d44cf5ecde -->